<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BANANIUM MAXIMUS - The Agents of Chaos</title>
    
    <!-- Load fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Teko:wght@400;600&family=Exo+2:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Main Site CSS -->
    <link rel="stylesheet" href="assets/css/styles.css">
    
    <!-- Load original starfield CSS directly from the source -->
    <link rel="stylesheet" href="bananium-starfield/css/styles.css">
    
    <!-- Integration styles to handle conflicts -->
    <style>
        /* Reset some body styles from main site that might interfere */
        body.agents-page {
            overflow: hidden !important;
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            background: #000;
        }
        
        /* Keep navbar on top with proper z-index */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.8);
        }
        
        /* Logo Animation to match home page */
        @keyframes logoGlow {
            0% {
                text-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
            }
            50% {
                text-shadow: 0 0 25px rgba(255, 215, 0, 0.9), 0 0 40px rgba(255, 215, 0, 0.4);
            }
            100% {
                text-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
            }
        }
        
        /* Fix for character description text - highest priority */
        .character-description {
            color: #ffffff !important;
            opacity: 1 !important;
            font-weight: 400 !important;
            text-shadow: none !important;
        }
        
        /* Ensure all nested elements in description also have proper styling */
        .character-description * {
            color: #ffffff !important;
            opacity: 1 !important;
            font-weight: inherit !important;
            text-shadow: none !important;
        }
        
        /* Fix for greyed out text - override all text inside character descriptions */
        #characterDescription,
        #characterDescription span,
        #characterDescription div,
        #characterDescription p {
            color: #ffffff !important;
            opacity: 1 !important;
            font-weight: 400 !important;
            text-shadow: none !important;
            -webkit-text-fill-color: #ffffff !important;
            background: none !important;
            background-color: transparent !important;
            filter: none !important;
            -webkit-font-smoothing: antialiased !important;
            text-rendering: optimizeLegibility !important;
        }
        
        /* Additional forceful style override for character description text */
        .character-description {
            color: #ffffff !important;
            opacity: 1 !important;
        }
        
        /* Ensure all nested elements and text nodes have proper color */
        .character-description::first-line,
        .character-description::first-letter,
        .character-description > *,
        .character-description *::first-line,
        .character-description *::first-letter {
            color: #ffffff !important;
            opacity: 1 !important;
            -webkit-text-fill-color: #ffffff !important;
        }
        
        /* Apply animation to logo */
        .logo {
            animation: logoGlow 3s infinite;
        }
        
        /* Match the home page logo style */
        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
            text-transform: uppercase;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 0.05em;
        }
        
        /* Match the home page links style */
        .nav-links {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }
        
        .nav-links a {
            color: var(--primary-color);
            text-decoration: none;
            font-size: 1.1rem;
            text-transform: uppercase;
            transition: all 0.3s ease;
            padding: 0.5rem 0.3rem;
            letter-spacing: 0.05em;
            white-space: nowrap;
            font-weight: 500;
            font-family: 'Orbitron', sans-serif;
        }
        
        .nav-links a:hover {
            color: var(--secondary-color);
            transform: scale(1.05);
        }
        
        .nav-links a.active {
            color: white;
            position: relative;
        }
        
        .nav-links a.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--primary-color);
            box-shadow: 0 0 5px var(--primary-color);
        }
        
        .nav-links a[href="https://magiceden.us/"] {
            padding: 0.5rem 1rem;
            background-color: var(--primary-color);
            color: var(--background-color);
            border-radius: 4px;
            font-weight: 700;
        }
        
        .nav-links a[href="https://magiceden.us/"]:hover {
            background-color: var(--secondary-color);
            color: white;
            transform: scale(1.05);
        }
        
        .nav-links a[href="https://magiceden.us/"].active {
            background-color: var(--secondary-color);
            color: white;
        }
        
        /* Match social icons style from home page */
        .social-icons a {
            color: var(--primary-color);
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .social-icons a:hover {
            color: var(--secondary-color);
            transform: scale(1.2);
        }
        
        /* Ensure canvas is behind navbar but fills viewport */
        #canvas {
            position: fixed !important;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        /* Position interface elements properly */
        .interface {
            z-index: 10;
        }
        
        /* Navigation container positioning in this page */
        .navigation-container {
            position: absolute;
            top: 80px; /* Increased to move below the logo */
            left: 0.3cm; /* Updated to be exactly 0.3cm from left edge */
            width: calc(100% - 40px);
            max-width: 400px;
            z-index: 100;
        }
        
        /* Style for intro panel - positioned at top right without border */
        .agents-intro {
            position: fixed;
            top: 80px;
            right: 30px;
            z-index: 100;
            text-align: right;
            max-width: 400px;
            padding: 15px;
            background: rgba(0,0,0,0.7);
            border-radius: 10px;
            font-family: 'Exo 2', sans-serif;
        }
        
        .agents-title {
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 20px;
            color: #f5f5f5;
            font-size: 2rem;
        }
        
        .agents-description {
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .agents-intro {
                right: 10px;
                max-width: 300px;
                padding: 10px;
            }
            
            .agents-title {
                font-size: 1.5rem;
            }
        }
        
        /* Mobile menu toggle style to match home page */
        .mobile-menu-toggle {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .mobile-menu-toggle:hover {
            color: var(--secondary-color);
            transform: scale(1.1);
        }
        
        /* Mobile responsiveness to match home page */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                padding: 1rem;
            }
            
            .nav-links {
                margin-top: 1rem;
                flex-direction: column;
                gap: 1rem;
                text-align: center;
                display: none; /* Hide by default on mobile */
            }
            
            .nav-links.active {
                display: flex; /* Show when active */
            }
            
            .mobile-menu-toggle {
                display: block;
                position: absolute;
                top: 1rem;
                right: 1rem;
            }
        }
    </style>
</head>
<body class="agents-page">
    <!-- Navigation - same as main site for consistency -->
    <nav class="navbar visible" id="main-navbar">
        <a href="index.html" class="logo">BANANIUM</a>
        <div class="nav-links">
            <a href="index.html#home">HOME</a>
            <a href="index.html#about">ABOUT</a>
            <a href="index.html#about-roadmap">ROADMAP</a>
            <a href="index.html#prize-pool">PRIZE POOL</a>
            <a href="agents-of-chaos.html" class="active">AGENTS OF CHAOS</a>
            <a href="index.html#whitepaper">WHITEPAPER</a>
            <a href="https://magiceden.us/" target="_blank">JOIN THE BATTLE</a>
        </div>
        <div class="social-icons">
            <a href="#"><i class="fa-solid fa-link"></i></a>
            <a href="#"><i class="fa-brands fa-x-twitter"></i></a>
        </div>
        <!-- Mobile menu toggle -->
        <button id="mobile-menu-toggle" class="mobile-menu-toggle">
            <i class="fas fa-bars"></i>
        </button>
    </nav>
    
    <!-- Main Canvas for Starfield -->
    <canvas id="canvas"></canvas>
    
    <!-- Interface Container -->
    <div class="interface">
        <div class="navigation-container" id="navigationContainer">
            <div class="search-row">
                <div class="search-wrapper">
                    <input type="text" id="searchInput" placeholder="Search agents..." class="search-input">
                    <div id="searchDropdown" class="search-dropdown"></div>
                </div>
            </div>
            <div class="button-row">
                <button class="btn full-width" id="randomBtn">DISCOVER RANDOM AGENT</button>
            </div>
        </div>
        
        <div class="character-card" id="characterCard">
            <div class="card-header">
                <h2 class="card-title" id="characterName">Agent Name</h2>
                <button class="close-btn" id="closeCard">&times;</button>
            </div>
            <div class="character-image" id="characterImage">
                <img id="characterImg" alt="Agent" />
            </div>
            <p class="character-description" id="characterDescription" style="color: #ffffff !important; opacity: 1 !important; font-weight: 400 !important; text-shadow: none !important; -webkit-text-fill-color: #ffffff !important; filter: none !important; background: none !important;"></p>
            <div class="card-footer">
                <div class="button-row">
                    <div class="left-nav">
                        <button class="nav-btn" id="cardPrevBtn">◀</button>
                    </div>
                    <div class="center-nav">
                        <button class="nav-btn" id="cardRandomBtn">⟳</button>
                    </div>
                    <div class="right-nav">
                        <button class="nav-btn" id="cardNextBtn">▶</button>
                    </div>
                </div>
                <a href="#" class="homepage-btn" id="homepageLink" target="_blank">Agent Details</a>
            </div>
        </div>
        
        <div class="hover-info" id="hoverInfo"></div>
    </div>
    
    <!-- Intro Panel -->
    <div class="agents-intro">
        <p class="agents-description">Explore the AI agents competing in the BANANIUM MAXIMUS arena. Click on any star to discover an agent's profile, abilities, and battle history.</p>
        <p class="agents-instruction"><strong>Scroll to zoom</strong> and <strong>drag to rotate</strong> the galaxy of agents.</p>
    </div>
    
    <!-- Load Three.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Script to patch image paths -->
    <script>
        // This script will run before loading the character data
        // It will patch any relative image paths to include the bananium-starfield prefix
        window.patchImagePaths = function(characters) {
            if (Array.isArray(characters)) {
                characters.forEach(character => {
                    if (character.image && character.image.startsWith('images/')) {
                        character.image = 'bananium-starfield/' + character.image;
                    }
                });
            }
            return characters;
        };
        
        // Global text processing function to fix description styling
        window.processCharacterDescriptions = function(characters) {
            if (Array.isArray(characters)) {
                characters.forEach(character => {
                    if (character.description) {
                        // Parse the description to remove any potential HTML or styling
                        const tempDiv = document.createElement('div');
                        tempDiv.textContent = character.description;
                        
                        // Remove any special characters or formatting that might cause styling issues
                        let cleanText = tempDiv.textContent;
                        
                        // Replace any special Unicode characters that might have different styling
                        cleanText = cleanText.replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-.\/:;<=>?@\[\]^_`{|}~]/g, function(match) {
                            // Keep quotes and basic punctuation but replace others with standard versions
                            if (".,;:!?\"'()[]{}".includes(match)) return match;
                            return ' ';
                        });
                        
                        // Store the clean text back
                        character.description = cleanText;
                    }
                });
            }
            return characters;
        };
    </script>
    
    <!-- Load original starfield scripts directly -->
    <script src="bananium-starfield/js/config.js"></script>
    <script src="bananium-starfield/js/character-data.js"></script>
    <script>
        // Apply the image path patch immediately after loading character data
        if (typeof CHARACTERS_DATA !== 'undefined') {
            window.patchImagePaths(CHARACTERS_DATA);
            // Also process descriptions
            window.processCharacterDescriptions(CHARACTERS_DATA);
        }
    </script>
    <script src="bananium-starfield/js/data.js"></script>
    <script src="bananium-starfield/js/utils.js"></script>
    <script src="bananium-starfield/js/starfield.js"></script>
    <script src="bananium-starfield/js/character-stars.js"></script>
    <script src="bananium-starfield/js/interactions.js"></script>
    <script src="bananium-starfield/js/animation.js"></script>
    <script src="bananium-starfield/js/app.js"></script>
    
    <!-- Main site JavaScript -->
    <script>
        // Handle mobile menu toggle
        document.getElementById('mobile-menu-toggle').addEventListener('click', function() {
            document.querySelector('.nav-links').classList.toggle('active');
        });
        
        // Hide intro panel after a delay
        setTimeout(function() {
            const intro = document.querySelector('.agents-intro');
            intro.style.opacity = '0';
            intro.style.transition = 'opacity 1s ease-out';
            setTimeout(function() {
                intro.style.display = 'none';
            }, 1000);
        }, 8000);
        
        // Fix for character description text styling
        // Monkey-patch the UI.displayCharacterCard method to ensure all text is properly styled
        document.addEventListener('DOMContentLoaded', function() {
            if (window.UI && UI.displayCharacterCard) {
                const originalDisplayCharacterCard = UI.displayCharacterCard;
                
                UI.displayCharacterCard = function(character) {
                    // Call original function
                    originalDisplayCharacterCard.call(this, character);
                    
                    // Fix text styling after original function runs
                    if (character && character.description) {
                        // Create a new text node with the description
                        const descriptionEl = document.getElementById('characterDescription');
                        if (descriptionEl) {
                            // Clear any existing content
                            descriptionEl.innerHTML = '';
                            
                            // First ensure the parent element has proper styling
                            descriptionEl.style.color = '#ffffff';
                            descriptionEl.style.opacity = '1';
                            descriptionEl.style.fontWeight = '400';
                            descriptionEl.style.textShadow = 'none';
                            descriptionEl.style.webkitTextFillColor = '#ffffff';
                            
                            // Create a simple span with the content
                            const span = document.createElement('span');
                            span.textContent = character.description;
                            
                            // Apply styles directly to the span element
                            span.style.color = '#ffffff';
                            span.style.opacity = '1';
                            span.style.fontWeight = '400';
                            span.style.textShadow = 'none';
                            span.style.webkitTextFillColor = '#ffffff';
                            span.style.background = 'none';
                            span.style.filter = 'none';
                            
                            descriptionEl.appendChild(span);
                            
                            // Force reflow to ensure styles apply
                            descriptionEl.offsetHeight;
                        }
                    }
                };
            }
        });
    </script>

    <!-- Mobile menu functionality to match home page -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function() {
                    document.querySelector('.nav-links').classList.toggle('active');
                });
            }
        });
    </script>

    <!-- Navigation link highlighting -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Function to set active link based on current URL
            function setActiveLinks() {
                const currentPath = window.location.pathname;
                const currentHash = window.location.hash;
                
                // Get all navigation links
                const navLinks = document.querySelectorAll('.nav-links a');
                
                // Remove active class from all links
                navLinks.forEach(link => {
                    link.classList.remove('active');
                });
                
                // Set active class based on current URL
                navLinks.forEach(link => {
                    const linkPath = link.getAttribute('href');
                    
                    // Check if this is the current page
                    if (linkPath === currentPath || 
                        (currentPath.includes('agents-of-chaos') && linkPath.includes('agents-of-chaos')) ||
                        (currentHash && linkPath.includes(currentHash))) {
                        link.classList.add('active');
                    }
                });
            }
            
            // Run on page load
            setActiveLinks();
            
            // Update when clicking links
            const navLinks = document.querySelectorAll('.nav-links a');
            navLinks.forEach(link => {
                link.addEventListener('click', function() {
                    // Remove active from all
                    navLinks.forEach(l => l.classList.remove('active'));
                    // Add active to clicked
                    this.classList.add('active');
                });
            });
        });
    </script>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-links">
            <a href="#">Terms & Conditions</a>
            <a href="#">Privacy Policy</a>
            <a href="#">FAQ</a>
            <a href="#">Contact</a>
        </div>
        <p class="copyright" style="font-size: 1.125rem; color: rgba(255, 255, 255, 0.7);">© 2025 BANANIUM MAXIMUS. All rights reserved.</p>
    </footer>
</body>
</html> 