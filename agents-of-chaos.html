<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BANANIUM MAXIMUS - The Agents of Chaos</title>
    
    <!-- Load fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Teko:wght@400;600&family=Exo+2:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Main Site CSS -->
    <link rel="stylesheet" href="assets/css/styles.css">
    
    <!-- Mobile-specific CSS -->
    <link rel="stylesheet" href="assets/css/mobile.css">
    
    <!-- Load original starfield CSS directly from the source -->
    <link rel="stylesheet" href="bananium-starfield/css/styles.css">
    
    <!-- Integration styles to handle conflicts -->
    <style>
        /* Reset some body styles from main site that might interfere */
        body.agents-page {
            overflow: hidden !important;
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            background: #000;
        }
        
        /* Keep navbar on top with proper z-index */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.8);
            height: auto; /* Ensure height is based on content */
            padding: 0.5rem 1rem; /* Reduce padding to make navbar thinner */
        }
        
        /* Logo Animation to match home page */
        @keyframes logoGlow {
            0% {
                text-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
            }
            50% {
                text-shadow: 0 0 25px rgba(255, 215, 0, 0.9), 0 0 40px rgba(255, 215, 0, 0.4);
            }
            100% {
                text-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
            }
        }
        
        /* Fix for character description text - highest priority */
        .character-description {
            color: #ffffff !important;
            opacity: 1 !important;
            font-weight: 400 !important;
            text-shadow: none !important;
        }
        
        /* Ensure all nested elements in description also have proper styling */
        .character-description * {
            color: #ffffff !important;
            opacity: 1 !important;
            font-weight: inherit !important;
            text-shadow: none !important;
        }
        
        /* Fix for greyed out text - override all text inside character descriptions */
        #characterDescription,
        #characterDescription span,
        #characterDescription div,
        #characterDescription p {
            color: #ffffff !important;
            opacity: 1 !important;
            font-weight: 400 !important;
            text-shadow: none !important;
            -webkit-text-fill-color: #ffffff !important;
            background: none !important;
            background-color: transparent !important;
            filter: none !important;
            -webkit-font-smoothing: antialiased !important;
            text-rendering: optimizeLegibility !important;
        }
        
        /* Additional forceful style override for character description text */
        .character-description {
            color: #ffffff !important;
            opacity: 1 !important;
        }
        
        /* Ensure all nested elements and text nodes have proper color */
        .character-description::first-line,
        .character-description::first-letter,
        .character-description > *,
        .character-description *::first-line,
        .character-description *::first-letter {
            color: #ffffff !important;
            opacity: 1 !important;
            -webkit-text-fill-color: #ffffff !important;
        }
        
        /* Apply animation to logo */
        .logo {
            animation: logoGlow 3s infinite;
        }
        
        /* Match the home page logo style */
        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
            text-transform: uppercase;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 0.05em;
        }
        
        /* Match the home page links style */
        .nav-links {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }
        
        .nav-links a {
            color: var(--primary-color);
            text-decoration: none;
            font-size: 1.1rem;
            text-transform: uppercase;
            transition: all 0.3s ease;
            padding: 0.5rem 0.3rem;
            letter-spacing: 0.05em;
            white-space: nowrap;
            font-weight: 500;
            font-family: 'Orbitron', sans-serif;
        }
        
        .nav-links a:hover {
            color: var(--secondary-color);
            transform: scale(1.05);
        }
        
        .nav-links a.active {
            color: white;
            position: relative;
        }
        
        .nav-links a.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--primary-color);
            box-shadow: 0 0 5px var(--primary-color);
        }
        
        .nav-links a[href="https://magiceden.us/"] {
            padding: 0.5rem 1rem;
            background-color: var(--primary-color);
            color: var(--background-color);
            border-radius: 4px;
            font-weight: 700;
        }
        
        .nav-links a[href="https://magiceden.us/"]:hover {
            background-color: var(--secondary-color);
            color: white;
            transform: scale(1.05);
        }
        
        .nav-links a[href="https://magiceden.us/"].active {
            background-color: var(--secondary-color);
            color: white;
        }
        
        /* Match social icons style from home page */
        .social-icons a {
            color: var(--primary-color);
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .social-icons a:hover {
            color: var(--secondary-color);
            transform: scale(1.2);
        }
        
        /* Ensure canvas is behind navbar but fills viewport */
        #canvas {
            position: fixed !important;
            top: 0;
            left: 0;
            width: 100% !important;
            height: 100% !important;
            z-index: 1;
        }
        
        /* Position interface elements properly */
        .interface {
            z-index: 10;
            width: 100% !important;
        }
        
        /* Navigation container positioning in this page - increase top margin */
        .navigation-container {
            position: absolute;
            top: 100px; /* Increased from 80px to ensure it's below the navbar */
            left: 0.3cm;
            width: calc(100% - 40px);
            max-width: 400px;
            z-index: 100;
        }
        
        /* Style for intro panel - positioned at top right without border */
        .agents-intro {
            position: fixed;
            top: 100px; /* Increased from 80px to match navigation container */
            right: 30px;
            z-index: 100;
            text-align: right;
            max-width: 400px;
            padding: 15px;
            background: rgba(0,0,0,0.7);
            border-radius: 10px;
            font-family: 'Exo 2', sans-serif;
        }
        
        .agents-title {
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 20px;
            color: #f5f5f5;
            font-size: 2rem;
        }
        
        .agents-description {
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: row !important;
                justify-content: center !important;
                align-items: center !important;
                padding: 0 !important;
                height: 60px !important;
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                width: 100% !important;
                background: rgba(0, 0, 0, 0.95) !important;
                box-shadow: 0 2px 10px rgba(0,0,0,0.7) !important;
                z-index: 2000 !important;
            }
            
            .navbar .logo {
                position: absolute !important;
                left: 50% !important;
                top: 50% !important;
                transform: translate(-50%, -50%) !important;
                padding: 0 !important;
                margin: 0 !important;
                font-size: 1.7rem !important;
                text-align: center !important;
            }
            
            .navbar .social-icons {
                display: none !important;
            }
            
            .mobile-menu-toggle {
                display: block !important;
                position: absolute !important;
                right: 10px !important;
                top: 50% !important;
                transform: translateY(-50%) !important;
                cursor: pointer !important;
                z-index: 1010 !important;
                color: #FFD700 !important;
                font-size: 1.5rem !important;
                background: transparent !important;
                border: none !important;
                padding-right: 5px !important;
            }
            
            .nav-links {
                margin-top: 0 !important;
                padding: 0 0 1rem 0 !important;
                flex-direction: column;
                gap: 1rem;
                text-align: center;
                display: none; /* Hide by default on mobile */
                width: 100% !important;
                position: fixed !important;
                top: 60px !important;
                left: 0 !important;
                right: 0 !important;
                background-color: rgba(0, 0, 0, 0.95) !important;
                z-index: 1999 !important;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) !important;
            }
            
            /* Style for the social bar inside mobile dropdown */
            .nav-links .mobile-social-bar {
                display: flex !important; 
                justify-content: center !important; 
                gap: 1.5rem !important; 
                padding: 0.75rem 0 !important; /* Padding top/bottom */
                border-bottom: 1px solid rgba(255, 215, 0, 0.2); /* Separator line */
                margin-bottom: 0.5rem; /* Space below the bar */
                width: 100%; /* Full width */
            }

            .nav-links .mobile-social-bar a {
                color: #FFD700 !important;
                font-size: 1.5rem !important;
                padding: 0 !important; /* Reset padding */
                margin: 0 !important; /* Reset margin */
            }

            .nav-links .mobile-social-bar a:hover {
                color: #FFFFFF !important;
                transform: scale(1.1); 
            }
            
            .nav-links.active {
                display: flex; /* Show when active */
                width: 100% !important;
            }
            
            /* Style main nav links (below social bar) */
            .nav-links > a {
                padding: 0.5rem 1rem !important;
                text-align: center !important;
                width: auto !important;
                margin: 0.25rem auto !important; /* Adjust vertical margin */
                display: inline-block !important;
                color: #FFD700 !important;
            }
            
            .nav-links > a.active {
                color: #FFFFFF !important;
                font-weight: bold !important;
                position: relative !important;
            }
            
            .nav-links > a.active::after {
                content: '' !important;
                position: absolute !important;
                left: 50% !important;
                bottom: -2px !important;
                width: 80% !important;
                height: 2px !important;
                background-color: #FFD700 !important;
                transform: translateX(-50%) !important;
                border-radius: 1px !important;
            }

            /* Add styles for .battle-link */
            .nav-links a.battle-link {
                background-color: #FFD700 !important;
                color: #000000 !important;
                font-weight: bold !important;
                margin-top: 10px !important;
                padding: 12px 20px !important;
                border-radius: 8px !important;
                box-shadow: 0 0 10px rgba(255, 215, 0, 0.5) !important;
                transition: all 0.3s ease !important;
                width: 80% !important;
                max-width: 250px !important;
                text-shadow: none !important;
                border: 2px solid #FFD700 !important;
            }

            /* Hide original desktop social icons on mobile */
            .navbar > .social-icons {
                 display: none !important;
            }
            
            .social-icons {
                width: 100% !important;
                justify-content: center;
                padding-right: 0 !important;
            }
            
            .navigation-container {
                position: fixed !important;
                top: 80px !important;      /* Position below navbar */
                left: 50% !important;      /* Position left edge at screen center */
                transform: translateX(-50%) !important; /* Shift back by half its width */
                width: 90% !important;     /* Keep the width */
                max-width: 400px;          /* Keep the max-width */
                /* Removed right, margin-left, margin-right */
                z-index: 100 !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                gap: 10px;
                padding: 0 !important;
                box-sizing: border-box !important;
            }
            
            .navigation-container .search-row,
            .navigation-container .button-row,
            .navigation-container .search-wrapper {
                width: 100% !important;
                display: flex !important;
                justify-content: center !important;
                padding: 0;
                margin: 0;
                box-sizing: border-box !important;
            }
            
            .navigation-container .search-input,
            .navigation-container .btn.full-width {
                width: 100% !important;
                box-sizing: border-box !important;
                text-align: center !important;
            }
            
            .agents-intro {
                position: fixed !important;
                top: auto !important;
                bottom: 20px !important;
                right: 0 !important;
                left: 0 !important;
                width: 92% !important;
                max-width: 92% !important;
                margin-left: auto !important;
                margin-right: auto !important;
                text-align: center !important;
                z-index: 100 !important;
                background: rgba(0,0,0,0.8) !important;
                padding: 12px !important;
                border-radius: 10px !important;
            }
            
            .character-card {
                position: fixed !important; /* Keep card fixed */
                top: 60px !important;      /* Position below 60px mobile navbar */
                left: 0 !important;        /* Align to left edge */
                right: 0 !important;       /* Align to right edge */
                bottom: 0 !important;      /* Stretch to bottom */
                width: 100% !important;    /* Full width */
                height: calc(100vh - 60px) !important; /* Full remaining height */
                max-width: none !important; /* Override any max-width */
                margin: 0 !important;      /* Remove margins */
                border-radius: 0 !important; /* Optional: Remove border-radius for full screen */
                z-index: 1500 !important;  /* Ensure it's above other elements but below navbar */
                /* display: none; /* Initially hidden, JS toggles to flex */ 
                /* The JS (`displayCharacterCard`) will set display: flex */
            }
            
            .agents-title {
                font-size: 1.5rem;
            }
            
            .footer {
                width: 100% !important;
                padding: 2rem 1rem !important;
            }
            
            .footer-links {
                flex-wrap: wrap !important;
                justify-content: center !important;
                gap: 1rem !important;
                width: 100% !important;
            }
        }
        
        /* Desktop styles to hide the mobile social bar */
        @media (min-width: 769px) {
            .nav-links .mobile-social-bar {
                display: none !important;
            }
        }
        
        /* Mobile menu toggle style to match home page */
        .mobile-menu-toggle {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .mobile-menu-toggle:hover {
            color: var(--secondary-color);
            transform: scale(1.1);
        }
        
        /* Make sure footer is positioned correctly */
        .footer {
            position: relative !important;
            bottom: 0 !important;
            left: 0 !important;
            width: 100% !important;
            z-index: 100 !important;
            background-color: rgba(0, 0, 0, 0.8) !important;
        }
    </style>
</head>
<body class="agents-page">
    <!-- Navigation - same as main site for consistency -->
    <nav class="navbar visible" id="main-navbar">
        <a href="index.html" class="logo" style="padding-left: 30px;">BANANIUM</a>
        <div class="nav-links">
            <!-- Added mobile social bar -->
            <div class="social-icons mobile-social-bar">
                <a href="#" class="nav-link"><i class="fa-brands fa-discord"></i></a> <!-- Discord Icon -->
                <a href="https://x.com/BananiumSOL" class="nav-link" target="_blank"><i class="fa-brands fa-x-twitter"></i></a>
            </div>
            <!-- Existing nav links -->
            <a href="index.html#home">HOME</a>
            <a href="index.html#about">ABOUT</a>
            <a href="index.html#about-roadmap">ROADMAP</a>
            <a href="index.html#prize-pool">PRIZE POOL</a>
            <a href="agents-of-chaos.html" class="active">AGENTS OF CHAOS</a>
            <a href="https://app.gitbook.com/o/9ZnpHDUG7efPKkYqKuZ1/s/NG5bbbgrg2I2mVKQG083/" target="_blank">WHITEPAPER</a>
            <!-- Added battle-link class -->
            <a href="https://magiceden.us/" target="_blank" class="battle-link">JOIN THE BATTLE</a> 
        </div>
        <!-- Removed original right-side social icons -->
        <!-- Mobile menu toggle -->
        <button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="nav-links">
            <i class="fas fa-bars"></i>
        </button>
    </nav>
    
    <!-- Main Canvas for Starfield -->
    <canvas id="canvas"></canvas>
    
    <!-- Interface Container -->
    <div class="interface">
        <div class="navigation-container" id="navigationContainer">
            <div class="search-row">
                <div class="search-wrapper">
                    <input type="text" id="searchInput" placeholder="Search agents..." class="search-input">
                    <div id="searchDropdown" class="search-dropdown"></div>
                </div>
            </div>
            <div class="button-row">
                <button class="btn full-width" id="randomBtn">DISCOVER RANDOM AGENT</button>
            </div>
        </div>
        
        <div class="character-card" id="characterCard">
            <div class="card-header">
                <h2 class="card-title" id="characterName">Agent Name</h2>
                <button class="close-btn" id="closeCard">&times;</button>
            </div>
            <div class="character-image" id="characterImage">
                <img id="characterImg" alt="Agent" />
            </div>
            <p class="character-description" id="characterDescription" style="color: #ffffff !important; opacity: 1 !important; font-weight: 400 !important; text-shadow: none !important; -webkit-text-fill-color: #ffffff !important; filter: none !important; background: none !important;"></p>
            <div class="card-footer">
                <div class="button-row">
                    <div class="left-nav">
                        <button class="nav-btn" id="cardPrevBtn">◀</button>
                    </div>
                    <div class="center-nav">
                        <button class="nav-btn" id="cardRandomBtn">⟳</button>
                    </div>
                    <div class="right-nav">
                        <button class="nav-btn" id="cardNextBtn">▶</button>
                    </div>
                </div>
                <a href="#" class="homepage-btn" id="homepageLink" target="_blank">Agent Details</a>
            </div>
        </div>
        
        <div class="hover-info" id="hoverInfo"></div>
    </div>
    
    <!-- Intro Panel -->
    <div class="agents-intro">
        <p class="agents-description">Explore the AI agents competing in the BANANIUM MAXIMUS arena. Click on any star to discover an agent's profile, abilities, and battle history.</p>
        <p class="agents-instruction"><strong>Scroll to zoom</strong> and <strong>drag to rotate</strong> the galaxy of agents.</p>
    </div>
    
    <!-- Load Three.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Script to patch image paths -->
    <script>
        // This script will run before loading the character data
        // It will patch any relative image paths to include the bananium-starfield prefix
        window.patchImagePaths = function(characters) {
            if (Array.isArray(characters)) {
                characters.forEach(character => {
                    if (character.image && character.image.startsWith('images/')) {
                        character.image = 'bananium-starfield/' + character.image;
                    }
                });
            }
            return characters;
        };
        
        // Global text processing function to fix description styling
        window.processCharacterDescriptions = function(characters) {
            if (Array.isArray(characters)) {
                characters.forEach(character => {
                    if (character.description) {
                        // Parse the description to remove any potential HTML or styling
                        const tempDiv = document.createElement('div');
                        tempDiv.textContent = character.description;
                        
                        // Remove any special characters or formatting that might cause styling issues
                        let cleanText = tempDiv.textContent;
                        
                        // Replace any special Unicode characters that might have different styling
                        cleanText = cleanText.replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-.\/:;<=>?@\[\]^_`{|}~]/g, function(match) {
                            // Keep quotes and basic punctuation but replace others with standard versions
                            if (".,;:!?\"'()[]{}".includes(match)) return match;
                            return ' ';
                        });
                        
                        // Store the clean text back
                        character.description = cleanText;
                    }
                });
            }
            return characters;
        };
    </script>
    
    <!-- Load original starfield scripts directly -->
    <script src="bananium-starfield/js/config.js"></script>
    <script src="bananium-starfield/js/character-data.js"></script>
    <script>
        // Apply the image path patch immediately after loading character data
        if (typeof CHARACTERS_DATA !== 'undefined') {
            window.patchImagePaths(CHARACTERS_DATA);
            // Also process descriptions
            window.processCharacterDescriptions(CHARACTERS_DATA);
        }
    </script>
    <script src="bananium-starfield/js/data.js"></script>
    <script src="bananium-starfield/js/utils.js"></script>
    <script src="bananium-starfield/js/starfield.js"></script>
    <script src="bananium-starfield/js/character-stars.js"></script>
    <script src="bananium-starfield/js/interactions.js"></script>
    <script src="bananium-starfield/js/animation.js"></script>
    <script src="bananium-starfield/js/app.js"></script>
    
    <!-- High-quality rendering enhancement script -->
    <script>
        // Ensure high-quality rendering for starfield
        document.addEventListener('DOMContentLoaded', function() {
            // Override App init to enforce high-quality rendering
            if (typeof App !== 'undefined') {
                // Store original init function
                const originalInitThree = App.initThree;
                
                // Override initThree with enhanced version
                App.initThree = function() {
                    // Call original function
                    originalInitThree.call(this);
                    
                    // If renderer was created successfully
                    if (this.renderer) {
                        console.log('Enhancing renderer quality');
                        
                        // Force high device pixel ratio (at least 2 for retina-like quality)
                        const pixelRatio = Math.max(2, window.devicePixelRatio);
                        this.renderer.setPixelRatio(pixelRatio);
                        
                        // Enable high-quality shadows
                        this.renderer.shadowMap.enabled = true;
                        this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
                        
                        // Set high-quality rendering parameters
                        this.renderer.antialias = true;
                        this.renderer.alpha = true;
                        this.renderer.powerPreference = 'high-performance';
                        
                        // Apply higher quality textures
                        if (typeof Starfield !== 'undefined' && Starfield.createGalaxyStarfield) {
                            // Store original createGalaxyStarfield function
                            const originalCreateGalaxyStarfield = Starfield.createGalaxyStarfield;
                            
                            // Override with enhanced version
                            Starfield.createGalaxyStarfield = function() {
                                // Create starfield
                                const starfield = originalCreateGalaxyStarfield.call(this);
                                
                                // Enhance material quality
                                if (starfield && starfield.material) {
                                    starfield.material.size = 5; // Larger stars
                                    
                                    // Make sure we're using additive blending for better glow effect
                                    starfield.material.blending = THREE.AdditiveBlending;
                                    
                                    // Add high-quality properties to the material
                                    starfield.material.premultipliedAlpha = true;
                                    starfield.material.sizeAttenuation = true;
                                    
                                    // Enhance texture filtering
                                    if (starfield.material.map) {
                                        starfield.material.map.minFilter = THREE.LinearFilter;
                                        starfield.material.map.magFilter = THREE.LinearFilter;
                                        starfield.material.map.anisotropy = 16; // Maximum anisotropic filtering
                                    }
                                }
                                
                                return starfield;
                            };
                        }
                    }
                };
                
                // If App is already initialized, apply high quality settings now
                if (App.renderer) {
                    console.log('Applying high quality settings to existing renderer');
                    
                    // Apply high pixel ratio
                    const pixelRatio = Math.max(2, window.devicePixelRatio);
                    App.renderer.setPixelRatio(pixelRatio);
                    
                    // Enable high-quality shadows
                    App.renderer.shadowMap.enabled = true;
                    App.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
                    
                    // Force a resize to update dimensions
                    App.renderer.setSize(window.innerWidth, window.innerHeight);
                    
                    // Update camera aspect ratio
                    if (App.camera) {
                        App.camera.aspect = window.innerWidth / window.innerHeight;
                        App.camera.updateProjectionMatrix();
                    }
                    
                    // If starfield exists, enhance its material
                    if (App.starfield && App.starfield.material) {
                        App.starfield.material.size = 5;
                        App.starfield.material.blending = THREE.AdditiveBlending;
                        App.starfield.material.sizeAttenuation = true;
                        
                        if (App.starfield.material.map) {
                            App.starfield.material.map.minFilter = THREE.LinearFilter;
                            App.starfield.material.map.magFilter = THREE.LinearFilter;
                            App.starfield.material.map.anisotropy = 16;
                        }
                    }
                }
            }
        });
    </script>
    
    <!-- Main site JavaScript -->
    <script>
        // Handle mobile menu toggle
        document.getElementById('mobile-menu-toggle').addEventListener('click', function() {
            document.querySelector('.nav-links').classList.toggle('active');
        });
        
        // Hide intro panel after a delay
        setTimeout(function() {
            const intro = document.querySelector('.agents-intro');
            intro.style.opacity = '0';
            intro.style.transition = 'opacity 1s ease-out';
            setTimeout(function() {
                intro.style.display = 'none';
            }, 1000);
        }, 8000);
        
        // Fix for character description text styling
        // Monkey-patch the UI.displayCharacterCard method to ensure all text is properly styled
        document.addEventListener('DOMContentLoaded', function() {
            if (window.UI && UI.displayCharacterCard) {
                const originalDisplayCharacterCard = UI.displayCharacterCard;
                
                UI.displayCharacterCard = function(character) {
                    // Call original function
                    originalDisplayCharacterCard.call(this, character);
                    
                    // Fix text styling after original function runs
                    if (character && character.description) {
                        // Create a new text node with the description
                        const descriptionEl = document.getElementById('characterDescription');
                        if (descriptionEl) {
                            // Clear any existing content
                            descriptionEl.innerHTML = '';
                            
                            // First ensure the parent element has proper styling
                            descriptionEl.style.color = '#ffffff';
                            descriptionEl.style.opacity = '1';
                            descriptionEl.style.fontWeight = '400';
                            descriptionEl.style.textShadow = 'none';
                            descriptionEl.style.webkitTextFillColor = '#ffffff';
                            
                            // Split the description by double newlines to handle paragraphs
                            const paragraphs = character.description.split('\n\n');
                            
                            // Create paragraph elements for each section
                            paragraphs.forEach(paragraphText => {
                                if (paragraphText.trim()) {
                                    const paragraph = document.createElement('p');
                                    paragraph.textContent = paragraphText.trim();
                                    
                                    // Apply styles directly to the paragraph element
                                    paragraph.style.color = '#ffffff';
                                    paragraph.style.opacity = '1';
                                    paragraph.style.fontWeight = '400';
                                    paragraph.style.textShadow = 'none';
                                    paragraph.style.webkitTextFillColor = '#ffffff';
                                    paragraph.style.background = 'none';
                                    paragraph.style.filter = 'none';
                                    paragraph.style.marginBottom = '1em';
                                    
                                    descriptionEl.appendChild(paragraph);
                                }
                            });
                            
                            // Force reflow to ensure styles apply
                            descriptionEl.offsetHeight;
                        }
                    }
                };
            }
        });
    </script>

    <!-- Mobile menu functionality to match home page -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function() {
                    document.querySelector('.nav-links').classList.toggle('active');
                });
            }
        });
    </script>

    <!-- Navigation link highlighting -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Function to set active link based on current URL
            function setActiveLinks() {
                const currentPath = window.location.pathname;
                const currentHash = window.location.hash;
                
                // Get all navigation links
                const navLinks = document.querySelectorAll('.nav-links a');
                
                // Remove active class from all links
                navLinks.forEach(link => {
                    link.classList.remove('active');
                });
                
                // Set active class based on current URL
                navLinks.forEach(link => {
                    const linkPath = link.getAttribute('href');
                    
                    // Check if this is the current page
                    if (linkPath === currentPath || 
                        (currentPath.includes('agents-of-chaos') && linkPath.includes('agents-of-chaos')) ||
                        (currentHash && linkPath.includes(currentHash))) {
                        link.classList.add('active');
                    }
                });
            }
            
            // Run on page load
            setActiveLinks();
            
            // Update when clicking links
            const navLinks = document.querySelectorAll('.nav-links a');
            navLinks.forEach(link => {
                link.addEventListener('click', function() {
                    // Remove active from all
                    navLinks.forEach(l => l.classList.remove('active'));
                    // Add active to clicked
                    this.classList.add('active');
                });
            });
        });
    </script>

    <!-- Mobile-specific enhancements -->
    <script src="assets/js/mobile.js"></script>
</body>
</html> 